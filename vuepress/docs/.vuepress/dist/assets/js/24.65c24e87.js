(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{310:function(s,n,a){"use strict";a.r(n);var t=a(6),e=Object(t.a)({},function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"haproxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#haproxy","aria-hidden":"true"}},[s._v("#")]),s._v(" HAProxy")]),s._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("可选组件")])]),s._v(" "),a("p",[s._v("仅供参考，如果使用阿里云/腾讯云等云服务，建议直接购买其负载均衡服务即可")]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.haproxy.org/#down",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -xzvf haproxy-1.9.7.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" haproxy-1.9.7/\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看系统内核版本号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -r\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/haproxy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" TARGET"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("generic ARCH"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x86_64 PREFIX"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/haproxy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" PREFIX"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/haproxy\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装成功后，查看haproxy版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" /usr/local/haproxy\n./sbin/haproxy -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加haproxy组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" haproxy\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建nginx运行账户haproxy并加入到haproxy组，不允许haproxy")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd -g haproxy haproxy -s /sbin/nologin")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd -g haproxy haproxy -s /bin/false")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -g haproxy haproxy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),a("p",[s._v("创建 && 编辑配置文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /usr/local/haproxy/conf\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /usr/local/haproxy/conf/haproxy.cfg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("配置文件内容, 注意：其中192.168.0.1、192.168.0.2、192.168.0.3需要替换为真实ip地址\n5672、1883、15672 端口为rabbitmq相应端口号")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 全局配置")]),s._v("\nglobal\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志输出配置，所有日志都记录在本机，通过local0输出, 默认是info级别，可配置两条")]),s._v("\n  log 127.0.0.1 local0 info\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最大连接数")]),s._v("\n  maxconn 4096\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 改变当前的工作目录")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chroot")]),s._v(" /usr/local/haproxy\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以守护进程方式运行haproxy #debug #quiet")]),s._v("\n  daemon\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 调试级别, 一般只在开启单进程时调试, 且生产环境禁用.")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#debug")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前进程pid文件")]),s._v("\n  pidfile /usr/local/haproxy/conf/haproxy.pid\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行haproxy 用户, 或者使用关键字uid")]),s._v("\n  user haproxy\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行haproxy 用户组, 或者使用关键字gid")]),s._v("\n  group haproxy\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# haproxy启动后不会显示任何相关信息, 这与在命令行启动haproxy时加上参数“-q”相同")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#quiet")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义统计信息保存位置")]),s._v("\n  stats socket /usr/local/haproxy/stats\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认配置")]),s._v("\ndefaults\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#继承全局的日志定义输出")]),s._v("\n  log global\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认的模式mode{tcp|http|health}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tcp是4层，http是7层，health只返回OK")]),s._v("\n  mode tcp\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志类别tcplog[httplog、tcplog]")]),s._v("\n  option tcplog\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#不记录健康检查日志信息")]),s._v("\n  option dontlognull\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当与后端服务器的会话失败(服务器故障或其他原因)时, 把会话重新分发到其他健康的服务器上;")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当故障服务器恢复时, 会话又被定向到已恢复的服务器上;")]),s._v("\n  option redispatch\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#当haproxy负载很高时, 自动结束掉当前队列处理比较久的链接.")]),s._v("\n  option abortonclose\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3次失败则认为服务不可用")]),s._v("\n  retries 3\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#每个进程可用的最大连接数")]),s._v("\n  maxconn 32000\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#haproxy与后端服务器连接超时时间.")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" connect 5s\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#客户端与haproxy连接后, 数据传输完毕, 不再有数据传输, 即非活动连接的超时时间.")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" client 120s\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#haproxy与后端服务器非活动连接的超时时间.")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("timeout")]),s._v(" server 120s\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置默认的负载均衡方式")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#balance source")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#balnace leastconn")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#绑定配置 rabbitmq amqp协议")]),s._v("\nlisten rabbitmq_cluster_amqp\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置TCP模式")]),s._v("\n  mode tcp\n  option tcplog\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#负载均衡算法, 简单的轮询")]),s._v("\n  balance roundrobin\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置访问端口")]),s._v("\n  bind 0.0.0.0:5672\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RabbitMQ集群节点配置")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server <name>：定义RabbitMQ服务的内部标示，注意这里的“rmq_node”是指包含有含义的字符串名称，不是指RabbitMQ的节点名称。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# <ip>:<port>：定义RabbitMQ服务的连接的IP地址和端口号。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# check inter <value>：定义了每隔多少毫秒检查RabbitMQ服务是否可用。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rise <value>：定义了RabbitMQ服务在发生故障之后，需要多少次健康检查才能被再次确认可用。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fall <value>：定义需要经历多少次失败的健康检查之后，HAProxy才会停止使用此RabbitMQ服务。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# weight <value>：定义了当前RabbitMQ服务的权重。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server rmq_node1 47.106.239.170:5672 check inter 5000 rise 2 fall 3 weight 1")]),s._v("\n  server rmq_node1 192.168.0.1:5672 check inter 5000 rise 2 fall 3 weight 1\n  server rmq_node2 192.168.0.2:5672 check inter 5000 rise 2 fall 3 weight 1\n  server rmq_node3 192.168.0.3:5672 check inter 5000 rise 2 fall 3 weight 1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#绑定配置rabbitmq mqtt协议")]),s._v("\nlisten rabbitmq_cluster_mqtt\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置TCP模式")]),s._v("\n  mode tcp\n  option tcplog\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#负载均衡算法, 简单的轮询")]),s._v("\n  balance roundrobin\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置访问端口")]),s._v("\n  bind 0.0.0.0:1883\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RabbitMQ集群节点配置")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server <name>：定义RabbitMQ服务的内部标示，注意这里的“rmq_node”是指包含有含义的字符串名称，不是指RabbitMQ的节点名称。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# <ip>:<port>：定义RabbitMQ服务的连接的IP地址和端口号。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# maxconn <value>: 表示该服务器的最大连接数")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# check inter <value>：定义了每隔多少毫秒检查RabbitMQ服务是否可用。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rise <value>：定义了RabbitMQ服务在发生故障之后，需要多少次健康检查才能被再次确认可用。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fall <value>：定义需要经历多少次失败的健康检查之后，HAProxy才会停止使用此RabbitMQ服务。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# weight <value>：定义了当前RabbitMQ服务的权重。默认1，最大为265，0则表示不参与负载均衡")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server rmq_node1 47.106.239.170:1883 check inter 5000 rise 2 fall 3 weight 1")]),s._v("\n  server rmq_node1 192.168.0.1:1883 check inter 5000 rise 2 fall 3 weight 1\n  server rmq_node2 192.168.0.2:1883 check inter 5000 rise 2 fall 3 weight 1\n  server rmq_node3 192.168.0.3:1883 check inter 5000 rise 2 fall 3 weight 1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#绑定配置rabbitmq管理后台")]),s._v("\nlisten rabbitmq_cluster_admin\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置TCP模式")]),s._v("\n  mode http\n  option httplog\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#负载均衡算法, 简单的轮询")]),s._v("\n  balance roundrobin\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置访问端口")]),s._v("\n  bind 0.0.0.0:15672\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RabbitMQ集群节点配置")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server <name>：定义RabbitMQ服务的内部标示，注意这里的“rmq_node”是指包含有含义的字符串名称，不是指RabbitMQ的节点名称。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# <ip>:<port>：定义RabbitMQ服务的连接的IP地址和端口号。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# check inter <value>：定义了每隔多少毫秒检查RabbitMQ服务是否可用。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rise <value>：定义了RabbitMQ服务在发生故障之后，需要多少次健康检查才能被再次确认可用。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# fall <value>：定义需要经历多少次失败的健康检查之后，HAProxy才会停止使用此RabbitMQ服务。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# weight <value>：定义了当前RabbitMQ服务的权重。")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# server rmq_node1 47.106.239.170:15672 check inter 5000 rise 2 fall 3 weight 1")]),s._v("\n  server rmq_node1 192.168.0.1:15672 check inter 5000 rise 2 fall 3 weight 1\n  server rmq_node2 192.168.0.2:15672 check inter 5000 rise 2 fall 3 weight 1\n  server rmq_node3 192.168.0.3:15672 check inter 5000 rise 2 fall 3 weight 1\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#haproxy监控页面地址")]),s._v("\nlisten monitor\n  mode http\n  option httplog\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置访问端口")]),s._v("\n  bind 0.0.0.0:8100\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# maxconn 10")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timeout client 100s")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timeout server 100s")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timeout connect 100s")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# timeout queue 100s")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启统计")]),s._v("\n  stats "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("enable")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统计页面访问url")]),s._v("\n  stats uri /stats\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#监控页面自动刷新时间")]),s._v("\n  stats refresh 5s\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#统计页面密码框提示文本")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stats realm Haproxy")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#隐藏统计页面上的haproxy版本信息")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stats hide-version")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stats show-node")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#监控页面的用户和密码, 可设置多个用户名")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stats auth admin:password")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#手工启动/禁用后端服务器, 可通过web管理节点")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# stats admin if TRUE")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置haproxy错误页面")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 400 /usr/local/haproxy/errorfiles/400.http")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 403 /usr/local/haproxy/errorfiles/403.http")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 408 /usr/local/haproxy/errorfiles/408.http")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 500 /usr/local/haproxy/errorfiles/500.http")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 502 /usr/local/haproxy/errorfiles/502.http")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 503 /usr/local/haproxy/errorfiles/503.http")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# errorfile 504 /usr/local/haproxy/errorfiles/504.http")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br"),a("span",{staticClass:"line-number"},[s._v("145")]),a("br"),a("span",{staticClass:"line-number"},[s._v("146")]),a("br"),a("span",{staticClass:"line-number"},[s._v("147")]),a("br"),a("span",{staticClass:"line-number"},[s._v("148")]),a("br"),a("span",{staticClass:"line-number"},[s._v("149")]),a("br"),a("span",{staticClass:"line-number"},[s._v("150")]),a("br"),a("span",{staticClass:"line-number"},[s._v("151")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cd")]),s._v(" /usr/local/haproxy\n./sbin/haproxy -f ./conf/haproxy.cfg\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 浏览器打开，其中ip为服务器地址，如：http://47.98.54.86:8100/stats")]),s._v("\nhttp://ip:8100/stats\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("killall")]),s._v(" haproxy\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看HAproxy状况")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -aux"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" haproxy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"微信公众号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信公众号","aria-hidden":"true"}},[s._v("#")]),s._v(" 微信公众号")]),s._v(" "),a("img",{staticStyle:{width:"250px"},attrs:{src:s.$withBase("/image/qrcode_xiaperio_430.jpg")}}),s._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://www.haproxy.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("HAProxy"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/u013256816/article/details/77150922",target:"_blank",rel:"noopener noreferrer"}},[s._v("RabbitMQ负载均衡（2）——HAProxy"),a("OutboundLink")],1)])])])},[],!1,null,null,null);n.default=e.exports}}]);