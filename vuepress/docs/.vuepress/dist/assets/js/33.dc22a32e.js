(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{320:function(r,t,a){"use strict";a.r(t);var s=a(6),e=Object(s.a)({},function(){var r=this,t=r.$createElement,a=r._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[a("h1",{attrs:{id:"quartz"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#quartz","aria-hidden":"true"}},[r._v("#")]),r._v(" Quartz")]),r._v(" "),a("p",[r._v("分布式定时任务")]),r._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[r._v("#")]),r._v(" 配置")]),r._v(" "),a("p",[r._v("pom.xml添加依赖")]),r._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("dependency"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("groupId"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("org.springframework.boot"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("/groupId"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("artifactId"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("spring-boot-starter-quartz"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("/artifactId"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("/dependency"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("\n")])]),r._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[r._v("1")]),a("br"),a("span",{staticClass:"line-number"},[r._v("2")]),a("br"),a("span",{staticClass:"line-number"},[r._v("3")]),a("br"),a("span",{staticClass:"line-number"},[r._v("4")]),a("br")])]),a("p",[r._v("导入"),a("a",{attrs:{href:"https://github.com/quartz-scheduler/quartz/blob/master/quartz-core/src/main/resources/org/quartz/impl/jdbcjobstore/",target:"_blank",rel:"noopener noreferrer"}},[r._v("sql"),a("OutboundLink")],1),r._v("数据库表")]),r._v(" "),a("p",[r._v("application.properties添加")]),r._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[r._v("# https://medium.com/@ChamithKodikara/spring-boot-2-quartz-2-scheduler-integration-a8eaaf850805")]),r._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[r._v("# SpringBoot官方说明：https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-quartz.html")]),r._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[r._v("# Quartz官方文档：https://www.quartz-scheduler.org/documentation/2.3.1-SNAPSHOT/tutorials/index.html")]),r._v("\nspring.quartz.job-store-type"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("jdbc\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[r._v("# 3种模式: ALWAYS、EMBEDDED、NEVER")]),r._v("\nspring.quartz.jdbc.initialize-schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("never\nspring.quartz.properties.org.quartz.jobStore.isClustered"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("true\nspring.quartz.properties.org.quartz.scheduler.instanceName"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("BytedeskScheduler\nspring.quartz.properties.org.quartz.scheduler.instanceId"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("AUTO\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[r._v("#spring.quartz.properties.org.quartz.scheduler.instanceIdGenerator.class=io.xiaper.schedule.util.CustomQuartzInstanceIdGenerator")]),r._v("\nspring.quartz.properties.org.quartz.jobStore.tablePrefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("QRTZ_\nspring.quartz.properties.org.quartz.jobStore.class"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("org.quartz.impl.jdbcjobstore.JobStoreTX\nspring.quartz.properties.org.quartz.jobStore.driverDelegateClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("org.quartz.impl.jdbcjobstore.StdJDBCDelegate\nspring.quartz.properties.org.quartz.jobStore.clusterCheckinInterval"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("10000\nspring.quartz.properties.org.quartz.jobStore.useProperties"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("false\nspring.quartz.properties.org.quartz.threadPool.class"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("org.quartz.simpl.SimpleThreadPool\nspring.quartz.properties.org.quartz.threadPool.threadCount"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("5\nspring.quartz.properties.org.quartz.threadPool.threadPriority"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("5\nspring.quartz.properties.org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("true\n")])]),r._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[r._v("1")]),a("br"),a("span",{staticClass:"line-number"},[r._v("2")]),a("br"),a("span",{staticClass:"line-number"},[r._v("3")]),a("br"),a("span",{staticClass:"line-number"},[r._v("4")]),a("br"),a("span",{staticClass:"line-number"},[r._v("5")]),a("br"),a("span",{staticClass:"line-number"},[r._v("6")]),a("br"),a("span",{staticClass:"line-number"},[r._v("7")]),a("br"),a("span",{staticClass:"line-number"},[r._v("8")]),a("br"),a("span",{staticClass:"line-number"},[r._v("9")]),a("br"),a("span",{staticClass:"line-number"},[r._v("10")]),a("br"),a("span",{staticClass:"line-number"},[r._v("11")]),a("br"),a("span",{staticClass:"line-number"},[r._v("12")]),a("br"),a("span",{staticClass:"line-number"},[r._v("13")]),a("br"),a("span",{staticClass:"line-number"},[r._v("14")]),a("br"),a("span",{staticClass:"line-number"},[r._v("15")]),a("br"),a("span",{staticClass:"line-number"},[r._v("16")]),a("br"),a("span",{staticClass:"line-number"},[r._v("17")]),a("br"),a("span",{staticClass:"line-number"},[r._v("18")]),a("br"),a("span",{staticClass:"line-number"},[r._v("19")]),a("br")])]),a("h2",{attrs:{id:"集群"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集群","aria-hidden":"true"}},[r._v("#")]),r._v(" 集群")]),r._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[r._v("spring.quartz.properties.org.quartz.jobStore.isClustered"),a("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v("true\n")])]),r._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[r._v("1")]),a("br")])]),a("h2",{attrs:{id:"微信公众号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#微信公众号","aria-hidden":"true"}},[r._v("#")]),r._v(" 微信公众号")]),r._v(" "),a("img",{staticStyle:{width:"250px"},attrs:{src:r.$withBase("/image/qrcode_xiaperio_430.jpg")}}),r._v(" "),a("h2",{attrs:{id:"参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[r._v("#")]),r._v(" 参考")]),r._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/quartz-scheduler/quartz/tree/master/docs/examples",target:"_blank",rel:"noopener noreferrer"}},[r._v("Quartz Examples"),a("OutboundLink")],1)]),r._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/quartz-scheduler/quartz/blob/master/quartz-core/src/main/resources/org/quartz/impl/jdbcjobstore/",target:"_blank",rel:"noopener noreferrer"}},[r._v("Quartz SQL"),a("OutboundLink")],1)])])])},[],!1,null,null,null);t.default=e.exports}}]);