(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{335:function(a,s,t){"use strict";t.r(s);var r=t(6),e=Object(r.a)({},function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器","aria-hidden":"true"}},[a._v("#")]),a._v(" 服务器")]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("ul",[t("li",[a._v("编程语言：Java")]),a._v(" "),t("li",[a._v("版本：JDK 8")]),a._v(" "),t("li",[a._v("框架：Spring Boot 2.1.4.RELEASE, Spring Cloud Greenwich.RELEASE")]),a._v(" "),t("li",[a._v("支持分布式集群部署，完全消除单点故障")])])]),a._v(" "),t("h2",{attrs:{id:"下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/xiaper/server",target:"_blank",rel:"noopener noreferrer"}},[a._v("Demo"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"准备"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备","aria-hidden":"true"}},[a._v("#")]),a._v(" 准备")]),a._v(" "),t("ul",[t("li",[a._v("Linux")]),a._v(" "),t("li",[t("router-link",{attrs:{to:"/component/nginx.html"}},[a._v("Nginx")])],1),a._v(" "),t("li",[t("router-link",{attrs:{to:"/component/mysql.html"}},[a._v("MySQL")])],1),a._v(" "),t("li",[t("router-link",{attrs:{to:"/component/redis.html"}},[a._v("Redis")])],1),a._v(" "),t("li",[t("router-link",{attrs:{to:"/component/rabbitmq.html"}},[a._v("RabbitMQ")])],1)]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("ul",[t("li",[a._v("Linux无特殊系统版本要求，Ubuntu或者CentOS均可。建议配置 16核，64G。")]),a._v(" "),t("li",[a._v("MySQL/Oracle二选其一，无特殊版本要求，建议最新稳定版，默认支持MySQL")]),a._v(" "),t("li",[a._v("Redis无特殊版本要求，建议最新稳定版。")]),a._v(" "),t("li",[a._v("RabbitMQ/ActiveMQ二选其一，无特殊版本要求，建议最新稳定版，默认支持RabbitMQ\n")])])]),a._v(" "),t("h2",{attrs:{id:"架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#架构","aria-hidden":"true"}},[a._v("#")]),a._v(" 架构")]),a._v(" "),t("p",[a._v("支持多种架构，可任选其一\n")]),a._v(" "),t("h3",{attrs:{id:"单体架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单体架构","aria-hidden":"true"}},[a._v("#")]),a._v(" 单体架构")]),a._v(" "),t("p",[t("img",{attrs:{src:"/xiaper.io/image/architechture/architechture-sole.png",alt:"单体架构"}})]),a._v(" "),t("h3",{attrs:{id:"分布式架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分布式架构","aria-hidden":"true"}},[a._v("#")]),a._v(" 分布式架构")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("中小企业\n"),t("img",{attrs:{src:"/xiaper.io/image/architechture/architechture-cluster.png",alt:"分布式架构"}})])]),a._v(" "),t("li",[t("p",[a._v("大型企业\n"),t("img",{attrs:{src:"/xiaper.io/image/architechture/architechture-cluster2.png",alt:"分布式架构2"}})])])]),a._v(" "),t("h3",{attrs:{id:"微服务架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微服务架构","aria-hidden":"true"}},[a._v("#")]),a._v(" 微服务架构")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("中小企业\n"),t("img",{attrs:{src:"/xiaper.io/image/architechture/architechture-service.png",alt:"微服务架构"}})])]),a._v(" "),t("li",[t("p",[a._v("大型企业\n"),t("img",{attrs:{src:"/xiaper.io/image/architechture/architechture-service2.png",alt:"微服务架构2"}})])])]),a._v(" "),t("p",[a._v("单体架构不推荐，分布式架构和微服务架构整体类似，我们下文主要以讲解分布式架构为主。")]),a._v(" "),t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[a._v("提示")]),a._v(" "),t("p",[a._v("支持多种部署方式，可任选其一")]),a._v(" "),t("ul",[t("li",[a._v("Jar：支持直接运行jar")]),a._v(" "),t("li",[a._v("War：支持war包放到Tomcat/WebLogic等容器中")]),a._v(" "),t("li",[a._v("Maven：支持将虾婆通过maven或gradle方式集成到现有项目中, "),t("a",{attrs:{href:"https://mvnrepository.com/artifact/io.xiaper",target:"_blank",rel:"noopener noreferrer"}},[a._v("maven"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("Docker：支持docker部署 TODO")])])]),a._v(" "),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),t("h3",{attrs:{id:"jdk8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#jdk8","aria-hidden":"true"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://github.com/Bytedesk/bytedesk-server/wiki/java",target:"_blank",rel:"noopener noreferrer"}},[a._v("JDK8"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"下载jar"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载jar","aria-hidden":"true"}},[a._v("#")]),a._v(" "),t("a",{attrs:{href:"https://github.com/Bytedesk/bytedesk-server/releases",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载Jar"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压","aria-hidden":"true"}},[a._v("#")]),a._v(" 解压")]),a._v(" "),t("p",[a._v("目录结构")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v(".")]),a._v("\n├─ README.md\n├─ config\n│  └─ application.properties\n├─ start.sh\n└─ xiaper-spring-boot-sample-webmvc-2.1.5-SNAPSHOT.jar\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h3",{attrs:{id:"nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[a._v("#")]),a._v(" "),t("router-link",{attrs:{to:"/component/nginx.html"}},[a._v("Nginx")])],1),a._v(" "),t("p",[a._v("需要配置负载均衡以便支持集群配置 和 websocket")]),a._v(" "),t("h3",{attrs:{id:"mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql","aria-hidden":"true"}},[a._v("#")]),a._v(" "),t("router-link",{attrs:{to:"/component/mysql.html"}},[a._v("MySQL")])],1),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 支持单体，同时支持多数据源、读写分离配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mysql 5.7")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#spring.datasource.driver-class-name=com.mysql.jdbc.Driver")]),a._v("\nspring.datasource.url"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("jdbc:mysql://localhost:3306/数据库名?autoReconnect"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("characterEncoding"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("utf8"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("useSSL"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&")]),a._v("serverTimezone"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("GMT%2B8\nspring.datasource.username"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("root\nspring.datasource.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h3",{attrs:{id:"redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis","aria-hidden":"true"}},[a._v("#")]),a._v(" "),t("router-link",{attrs:{to:"/component/redis.html"}},[a._v("Redis")])],1),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 支持单体，同时支持集群配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# redis缓存")]),a._v("\nspring.cache.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Redis\nspring.redis.database"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("0\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Redis服务器地址")]),a._v("\nspring.redis.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Redis服务器连接端口")]),a._v("\nspring.redis.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("6379\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Redis服务器连接密码（默认为空）")]),a._v("\nspring.redis.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br")])]),t("h3",{attrs:{id:"rabbitmq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rabbitmq","aria-hidden":"true"}},[a._v("#")]),a._v(" "),t("router-link",{attrs:{to:"/component/rabbitmq.html"}},[a._v("RabbitMQ")])],1),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 支持单体，同时支持集群配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果通过HAProxy连接，则此处请配置Haproxy地址")]),a._v("\nspring.rabbitmq.host"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("127.0.0.1\nspring.rabbitmq.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("5672\nspring.rabbitmq.username"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("用户名\nspring.rabbitmq.password"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("密码\nspring.rabbitmq.stomp.port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("61613\nspring.rabbitmq.stomp.login"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("stomp_web\nspring.rabbitmq.stomp.passcode"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("stomp_web\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br")])]),t("h3",{attrs:{id:"上传文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 上传文件")]),a._v(" "),t("p",[a._v("支持服务器本地存储、阿里云OSS、腾讯云对象存储三种存储方式，其中本地存储不支持集群")]),a._v(" "),t("p",[a._v("上传腾讯云")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 腾讯云cos")]),a._v("\nupload.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tencent\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建bucket并需要在此bucket下创建文件夹：apns/development(二级文件夹), apns/production(二级文件夹), avatars, images, voices, files")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 存储桶所属地域")]),a._v("\ntencent.bucket.location"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 存储桶名称")]),a._v("\ntencent.bucket.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 访问域名")]),a._v("\ntencent.bucket.domain"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#API密钥管理获取")]),a._v("\ntencent.appid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ntencent.secretid"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\ntencent.secretkey"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br")])]),t("p",[a._v("上传阿里云OSS")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 阿里云OSS")]),a._v("\nupload.type"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("aliyun\n\naliyun.access.key.id"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\naliyun.access.key.secret"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 阿里云OSS服务相关配置")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OSS的endpoint,这里是华南地区(也就是深圳)")]),a._v("\naliyun.oss.endpoint"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#")]),a._v("\naliyun.oss.base.url"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这是创建的bucket")]),a._v("\naliyun.oss.bucket.name"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 这里已经把自己的域名映射到bucket地址了。需要设置域名绑定，设置域名CNAME（暂不使用）")]),a._v("\naliyun.oss.img.domain"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br")])]),t("ul",[t("li",[a._v("上传到服务器")]),a._v(" "),t("li",[a._v("修改start.sh权限为可执行权限，如：")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" 777 start.sh\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("./start.sh\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("ul",[t("li",[a._v("查看是否启动成功")])]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("方法1：\n  等待5分钟后，执行 "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("netstat")]),a._v(" -ntlp, 查看8000端口号是否启动，如有，则启动成功\n\n方法2：\n  浏览器中输入 http://ip:8000/hello 查看是否有返回，如有，则启动成功\n\n其中：ip为此台服务器地址\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br")])]),t("h4",{attrs:{id:"修改nginx负载均衡配置，指向此服务器地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改nginx负载均衡配置，指向此服务器地址","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改nginx负载均衡配置，指向此服务器地址")]),a._v(" "),t("p",[a._v("客户端均通过nginx访问rest接口，nginx需要支持https和websocket, 具体可参考"),t("router-link",{attrs:{to:"/component/nginx.html"}},[a._v("Nginx")])],1),a._v(" "),t("h4",{attrs:{id:"如需配置集群，可在多台机器上重复上述步骤即可"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如需配置集群，可在多台机器上重复上述步骤即可","aria-hidden":"true"}},[a._v("#")]),a._v(" 如需配置集群，可在多台机器上重复上述步骤即可")]),a._v(" "),t("h4",{attrs:{id:"集群扩容，可在新增机器上重复上述步骤即可"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集群扩容，可在新增机器上重复上述步骤即可","aria-hidden":"true"}},[a._v("#")]),a._v(" 集群扩容，可在新增机器上重复上述步骤即可")]),a._v(" "),t("h4",{attrs:{id:"后续新版升级步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后续新版升级步骤","aria-hidden":"true"}},[a._v("#")]),a._v(" 后续新版升级步骤")]),a._v(" "),t("p",[a._v("注意：为了不影响集群整体可用性，建议一台一台升级，也即只有第一台升级成功之后，再按照下述步骤升级第二台")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("查看进程：netstat -ntlp，找到8000对应进程号\n杀掉进程：kill -9 进程号\n上传新版：jar文件\n启动：./start.sh\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h2",{attrs:{id:"前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前端","aria-hidden":"true"}},[a._v("#")]),a._v(" 前端")]),a._v(" "),t("h3",{attrs:{id:"安卓端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安卓端","aria-hidden":"true"}},[a._v("#")]),a._v(" 安卓端")]),a._v(" "),t("ul",[t("li",[a._v("参考demo中：自定义服务器")]),a._v(" "),t("li",[a._v("REST服务器为nginx地址")]),a._v(" "),t("li",[a._v("其中消息服务器地址为RabbitMQ服务器地址, 如通过haproxy连接则填写haproxy地址")])]),a._v(" "),t("h3",{attrs:{id:"ios端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios端","aria-hidden":"true"}},[a._v("#")]),a._v(" iOS端")]),a._v(" "),t("ul",[t("li",[a._v("参考demo中：自定义服务器")]),a._v(" "),t("li",[a._v("REST服务器为nginx地址")]),a._v(" "),t("li",[a._v("其中消息服务器地址为RabbitMQ服务器地址, 如通过haproxy连接则填写haproxy地址")])]),a._v(" "),t("h3",{attrs:{id:"web端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#web端","aria-hidden":"true"}},[a._v("#")]),a._v(" web端")]),a._v(" "),t("ul",[t("li",[a._v("修改js/data.js中默认HOST地址为nginx地址")])]),a._v(" "),t("h3",{attrs:{id:"微信公众号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#微信公众号","aria-hidden":"true"}},[a._v("#")]),a._v(" 微信公众号")]),a._v(" "),t("img",{staticStyle:{width:"250px"},attrs:{src:a.$withBase("/image/qrcode_xiaperio_430.jpg")}}),a._v(" "),t("h2",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[a._v("#")]),a._v(" 参考")])])},[],!1,null,null,null);s.default=e.exports}}]);