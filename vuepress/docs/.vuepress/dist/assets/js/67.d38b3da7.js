(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{353:function(e,t,r){"use strict";r.r(t);var a=r(6),s=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"音视频"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#音视频","aria-hidden":"true"}},[e._v("#")]),e._v(" 音视频")]),e._v(" "),r("div",{staticClass:"tip custom-block"},[r("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),r("p",[e._v("基于WebRTC的音视频解决方案")]),e._v(" "),r("ul",[r("li",[e._v("音视频客服")]),e._v(" "),r("li",[e._v("IM音视频")])])]),e._v(" "),r("h2",{attrs:{id:"集成"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#集成","aria-hidden":"true"}},[e._v("#")]),e._v(" 集成")]),e._v(" "),r("p",[e._v("客户端集成步骤")]),e._v(" "),r("h2",{attrs:{id:"部署"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#部署","aria-hidden":"true"}},[e._v("#")]),e._v(" 部署")]),e._v(" "),r("p",[e._v("服务器部署")]),e._v(" "),r("ul",[r("li",[r("router-link",{attrs:{to:"/component/coturn.html"}},[e._v("coturn")])],1)]),e._v(" "),r("h2",{attrs:{id:"会话流程"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#会话流程","aria-hidden":"true"}},[e._v("#")]),e._v(" 会话流程")]),e._v(" "),r("p",[e._v("技术细节")]),e._v(" "),r("p",[r("img",{attrs:{src:"/xiaper.io/image/webrtc/flow.png",alt:"流程"}})]),e._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("邀请视频会话：\nA createOffer\nA setLocalDescription // A 的 SDP\nB setRemoteDescription // A 的 SDP\nB createAnswer\nB setLocalDescription // B 的 SDP\nA setRemoteDescription // B 的 SDP\nB received remote stream，此时，接收端已经可以播放视频。接着，触发 B 的 onaddstream 监听事件。获得远端的 video stream，注意此时 B 的 SDP 协商还未完成。\n此时，本地的 A candidate 的状态已经改变，触发 A onicecandidate。开始通过 B.addIceCandidate 方法将 A 添加进去。\nA addIceCandidate success。A 添加成功\n触发 oniceconnectionstatechange 检查 A 远端 candidate 的状态。当为 completed 状态时，则会触发 B onicecandidate 事件。\nB addIceCandidate success。\n通话建立\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br")])]),r("h2",{attrs:{id:"微信公众号"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#微信公众号","aria-hidden":"true"}},[e._v("#")]),e._v(" 微信公众号")]),e._v(" "),r("img",{staticStyle:{width:"250px"},attrs:{src:e.$withBase("/image/qrcode_xiaperio_430.jpg")}}),e._v(" "),r("h2",{attrs:{id:"参考"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://webrtc.org/start/",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebRTC 官网"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://webrtc.googlesource.com/src/+/refs/heads/master",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebRTC src && examples"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://webrtc.github.io/samples/",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebRTC samples"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://codelabs.developers.google.com/codelabs/webrtc-web/#0",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebRTC codelab"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.html5rocks.com/en/tutorials/webrtc/basics/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Getting Started with WebRTC"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/coturn/coturn",target:"_blank",rel:"noopener noreferrer"}},[e._v("CoTurn"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/",target:"_blank",rel:"noopener noreferrer"}},[e._v("TrickleICE:测试Coturn是否正确部署"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1004661",target:"_blank",rel:"noopener noreferrer"}},[e._v("WebRTC 点对点直播"),r("OutboundLink")],1)])])])},[],!1,null,null,null);t.default=s.exports}}]);